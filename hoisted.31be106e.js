function F(o){["link","go"].includes(o)&&window.scrollTo({top:0})}function v(o){const e=new URL(o||window.location.href).href;return e.endsWith("/")||e.includes(".")?e:`${e}/`}function S(o){(!window.history.state||window.history.state.url!==o)&&window.history.pushState({url:o},"internalLink",o)}function I(o){document.querySelector(o).scrollIntoView({behavior:"smooth",block:"start"})}function A(o){const e=v();return{type:"popstate",next:e}}function C(o){let e;if(o.altKey||o.ctrlKey||o.metaKey||o.shiftKey)return{type:"disqualified"};for(let t=o.target;t.parentNode;t=t.parentNode)if(t.nodeName==="A"){e=t;break}if(e&&e.host!==location.host)return e.target="_blank",{type:"external"};if(e&&"cold"in e?.dataset)return{type:"disqualified"};if(e!=null&&e.hasAttribute("href")){const t=e.getAttribute("href"),i=new URL(t,location.href);if(o.preventDefault(),t!=null&&t.startsWith("#"))return I(t),{type:"scrolled"};const s=v(i.href),n=v();return{type:"link",next:s,prev:n}}else return{type:"noop"}}function N(o){return new DOMParser().parseFromString(o,"text/html")}function y(o){document.body.replaceWith(o.body)}function T(o){const e=r=>Array.from(r.querySelectorAll('head>:not([rel="prefetch"]')),t=e(document),i=e(o),{staleNodes:s,freshNodes:n}=q(t,i);s.forEach(r=>r.remove()),document.head.append(...n)}function q(o,e){const t=[],i=[];let s=0,n=0;for(;s<o.length||n<e.length;){const r=o[s],a=e[n];if(r!=null&&r.isEqualNode(a)){s++,n++;continue}const c=r?i.findIndex(u=>u.isEqualNode(r)):-1;if(c!==-1){i.splice(c,1),s++;continue}const f=a?t.findIndex(u=>u.isEqualNode(a)):-1;if(f!==-1){t.splice(f,1),n++;continue}r&&t.push(r),a&&i.push(a),s++,n++}return{staleNodes:t,freshNodes:i}}function E(){document.head.querySelectorAll("[data-reload]").forEach(k),document.body.querySelectorAll("script").forEach(k)}function k(o){const e=document.createElement("script"),t=Array.from(o.attributes);for(const{name:i,value:s}of t)e[i]=s;e.append(o.textContent),o.replaceWith(e)}const B={log:!1,pageTransitions:!1};class M{constructor(e){this.opts=e,this.enabled=!0,this.prefetched=new Set,this.opts={...B,...e??{}},window!=null&&window.history?(document.addEventListener("click",t=>this.onClick(t)),window.addEventListener("popstate",t=>this.onPop(t)),this.prefetch()):(console.warn("flamethrower router not supported in this browser or environment"),this.enabled=!1)}go(e){const t=window.location.href,i=new URL(e,location.origin).href;return this.reconstructDOM({type:"go",next:i,prev:t})}back(){window.history.back()}forward(){window.history.forward()}get allLinks(){return Array.from(document.links).filter(e=>e.href.includes(document.location.origin)&&!e.href.includes("#")&&e.href!==(document.location.href||document.location.href+"/")&&!this.prefetched.has(e.href))}log(...e){this.opts.log&&console.log(...e)}prefetch(){if(this.opts.prefetch==="visible")this.prefetchVisible();else if(this.opts.prefetch==="hover")this.prefetchOnHover();else return}prefetchOnHover(){this.allLinks.forEach(e=>{const t=e.getAttribute("href");e.addEventListener("pointerenter",()=>this.createLink(t),{once:!0})})}prefetchVisible(){const e={root:null,rootMargin:"0px",threshold:1};"IntersectionObserver"in window&&(this.observer||(this.observer=new IntersectionObserver((t,i)=>{t.forEach(s=>{const n=s.target.getAttribute("href");if(this.prefetched.has(n)){i.unobserve(s.target);return}s.isIntersecting&&(this.createLink(n),i.unobserve(s.target))})},e)),this.allLinks.forEach(t=>this.observer.observe(t)))}createLink(e){const t=document.createElement("link");t.rel="prefetch",t.href=e,t.as="document",t.onload=()=>this.log("\u{1F329}\uFE0F prefetched",e),t.onerror=i=>this.log("\u{1F915} can't prefetch",e,i),document.head.appendChild(t),this.prefetched.add(e)}onClick(e){this.reconstructDOM(C(e))}onPop(e){this.reconstructDOM(A())}async reconstructDOM({type:e,next:t,prev:i}){if(!this.enabled){this.log("router disabled");return}try{if(this.log("\u26A1",e),["popstate","link","go"].includes(e)&&t!==i){this.opts.log&&console.time("\u23F1\uFE0F"),window.dispatchEvent(new CustomEvent("flamethrower:router:fetch")),e!="popstate"&&S(t);const s=await(await fetch(t,{headers:{"X-Flamethrower":"1"}}).then(r=>{const a=r.body.getReader(),c=parseInt(r.headers.get("Content-Length"));let f=0;return new ReadableStream({start(u){function p(){a.read().then(({done:m,value:g})=>{if(m){u.close();return}f+=g.length,window.dispatchEvent(new CustomEvent("flamethrower:router:fetch-progress",{detail:{progress:Number.isNaN(c)?0:f/c*100,received:f,length:c||0}})),u.enqueue(g),p()})}p()}})}).then(r=>new Response(r,{headers:{"Content-Type":"text/html"}}))).text(),n=N(s);T(n),this.opts.pageTransitions&&document.createDocumentTransition?document.createDocumentTransition().start(()=>{y(n),E()}):(y(n),E()),F(e),window.dispatchEvent(new CustomEvent("flamethrower:router:end")),setTimeout(()=>{this.prefetch()},200),this.opts.log&&console.timeEnd("\u23F1\uFE0F")}}catch(s){return window.dispatchEvent(new CustomEvent("flamethrower:router:error",s)),this.opts.log&&console.timeEnd("\u23F1\uFE0F"),console.error("\u{1F4A5} router fetch failed",s),!1}}}const O=o=>{const e=new M(o);if(o.log&&console.log("\u{1F525} flamethrower engaged"),window){const t=window;t.flamethrower=e}return e};window.router=O({pageTransitions:!1,log:!1,prefetch:"visible"});(()=>{const o=document.querySelector("html"),e=document.getElementById("nav"),t=document.getElementById("nav-toggle"),i=(s,n)=>{n.addEventListener("click",a=>{s.dataset.opened?delete s.dataset.opened:s.dataset.opened="true"}),new MutationObserver(a=>{for(const c of a)c.type==="attributes"&&c.attributeName==="data-theme"&&(n.children[0].setAttribute("fill",o.dataset.theme==="dark"?"white":"black"),console.log(n.children[0]))}).observe(o,{childList:!1,attributes:!0,subtree:!1}),n.children[0].setAttribute("fill",o.dataset.theme==="dark"?"white":"black")};window.addEventListener("click",s=>{const n=document.getElementById("nav"),r=document.getElementById("nav-toggle");n.dataset.opened&&!r.contains(s.target)&&!n.contains(s.target)&&delete n.dataset.opened}),window.addEventListener("flamethrower:router:end",()=>{const s=document.getElementById("nav"),n=document.getElementById("nav-toggle");i(s,n)}),i(e,t)})();(()=>{const o=document.getElementById("stars"),e=[];function t(n,r){return Math.floor(Math.random()*(r-n+1))+n}const i=n=>{document.querySelector("html").dataset.theme;const r=n.getBoundingClientRect(),a=window.innerHeight*window.innerWidth/19e3;for(let c=0;c<a;c+=1)e[c]={size:t(1,3),x:t(16,r.width-16),y:t(64,r.height-16),pointiness:t(1,2)}},s=n=>{const r=n.getContext("2d"),a=document.querySelector("html"),c=getComputedStyle(a),f=n.getBoundingClientRect();n.width=f.width,n.height=f.height;const u=()=>{const l=a.dataset.theme==="dark";r.fillStyle=`rgb(${c.getPropertyValue(l?"--primary-200":"--primary-600")})`},p=({x:l,y:h,color:b,pointiness:L=3,size:d})=>{b&&(r.fillStyle=b);const w=d*L;r.beginPath(),r.moveTo(l,h-w),r.lineTo(l+d/2,h-d/2),r.lineTo(l+w,h+d/4),r.lineTo(l+d/2,h+d/2),r.lineTo(l-d/4,h+w),r.lineTo(l-d/2,h+d/2),r.lineTo(l-w,h-d/4),r.lineTo(l-d/2,h-d/2),r.closePath(),r.fill(),u()},m=()=>{for(const l of e)p(l)};new MutationObserver(l=>{for(const h of l)h.type==="attributes"&&h.attributeName==="data-theme"&&(u(),m())}).observe(a,{childList:!1,attributes:!0,subtree:!1}),e.length===0&&i(n),u(),m()};window.addEventListener("flamethrower:router:end",()=>{const n=document.getElementById("stars");s(n)}),window.addEventListener("resize",()=>{const n=document.getElementById("stars");i(n),s(n)}),s(o)})();
